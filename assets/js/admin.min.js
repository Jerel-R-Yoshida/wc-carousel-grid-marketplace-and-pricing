!function(e){"use strict";var i={init:function(){this.bindEvents(),this.initPricePreviews()},bindEvents:function(){e(document).on("change","#_wc_cgmp_enabled",this.toggleMarketplace),e(document).on("click",".wc-cgmp-display-header, .wc-cgmp-button-header",this.toggleSection),e(document).on("input",".wc-cgmp-price-input",this.updatePricePreview),e(document).on("input",".wc-cgmp-tier-name-input",this.updateTierHeader),e(document).on("input",".wc-cgmp-url-input",this.validateUrlInput)},toggleMarketplace:function(){var i=e(this).is(":checked"),t=e(".wc-cgmp-tier-pricing-section"),c=e(".wc-cgmp-display-section"),n=e(".wc-cgmp-button-section");i?(t.slideDown(200),c.slideDown(200),n.slideDown(200)):(t.slideUp(200),c.slideUp(200),n.slideUp(200))},toggleSection:function(){e(this).closest(".wc-cgmp-display-section, .wc-cgmp-button-section").toggleClass("collapsed")},initPricePreviews:function(){var i=this;e(".wc-cgmp-tier-card").each(function(){i.updatePreviewForTier(e(this))})},updatePricePreview:function(){var t=e(this).closest(".wc-cgmp-tier-card");i.updatePreviewForTier(t)},updatePreviewForTier:function(e){e.data("tier");var t=e.find('.wc-cgmp-price-input[data-type="monthly"]'),c=e.find('.wc-cgmp-price-input[data-type="hourly"]'),n=e.find(".wc-cgmp-preview-prices"),r=parseFloat(t.val())||0,a=parseFloat(c.val())||0,p="";r>0&&(p+='<span class="wc-cgmp-preview-price monthly-preview">$'+i.formatPrice(r)+'<span class="period">/mo</span></span>'),a>0&&(p+='<span class="wc-cgmp-preview-price hourly-preview">$'+i.formatPrice(a)+'<span class="period">/hr</span></span>'),p||(p='<span class="wc-cgmp-preview-price" style="color: #999; font-weight: 400;">'+i.placeholderText+"</span>"),n.html(p)},formatPrice:function(e){return e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},updateTierHeader:function(){var i=e(this).closest(".wc-cgmp-tier-card").find(".wc-cgmp-tier-name"),t=e(this).val().trim(),c=e(this).attr("placeholder");i.text(t||c)},validateUrlInput:function(){var t=e(this).val().trim();t&&!i.isValidURL(t)?e(this).addClass("invalid-url"):e(this).removeClass("invalid-url")},isValidURL:function(e){try{return new URL(e),!0}catch(e){return!1}},placeholderText:"Enter prices to preview"};e(document).ready(function(){i.init()})}(jQuery);